<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Decision Lab</title>
  <link rel="manifest" href="manifest.json?v=2" />
  <link rel="icon" sizes="32x32" href="assets/icons/favicon-32.png" />
  <link rel="icon" sizes="16x16" href="assets/icons/favicon-16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-v2.png" />
  <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-v2.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="brand-mark"></div>
        <div>
          <div class="title">Decision Lab</div>
          <div class="subtitle">Scenario-based decision training</div>
        </div>
      </div>
      <div class="controls">
        <label class="resource-select">
          <span>Helpful Resources</span>
          <select id="resourceSelect">
            <option value="">Select a resource</option>
            <option value="https://988lifeline.org/">988 Suicide & Crisis Lifeline</option>
            <option value="https://www.samhsa.gov/find-help/helplines">SAMHSA Helplines</option>
            <option value="https://211.org/homepage">United Way 211</option>
            <option value="https://www.stopbullying.gov/">StopBullying.gov</option>
            <option value="https://www.nimh.nih.gov/health">NIMH Mental Health Information</option>
            <option value="https://casel.org/">CASEL (Social & Emotional Learning)</option>
          </select>
        </label>
        <label class="resource-select">
          <span>Youth Resources</span>
          <select id="youthResourceSelect">
            <option value="">Select a youth resource</option>
            <option value="https://www.consumerfinance.gov/youth-financial-education">CFPB Youth Financial Education</option>
            <option value="https://www.fdic.gov/consumer-resource-center/money-smart-young-people">FDIC Money Smart for Young People</option>
            <option value="https://banzai.org/">Banzai (Financial Literacy)</option>
            <option value="https://www.brightfuturespress.com/more-resources">Career Idea of the Week (Free)</option>
            <option value="https://www.dove.com/us/en/dove-self-esteem-project/self-esteem-resources-for-youth-groups.html">Dove Self‑Esteem Project</option>
          </select>
        </label>
        <label class="resource-select">
          <span>Adult Resources</span>
          <select id="adultResourceSelect">
            <option value="">Select an adult resource</option>
            <option value="https://www.consumerfinance.gov/consumer-tools/educator-tools/adult-financial-education/">CFPB Adult Financial Education</option>
            <option value="https://www.fdic.gov/consumer-resource-center/money-smart-adults">FDIC Money Smart for Adults</option>
            <option value="https://www.mymoney.gov/">MyMoney.gov (Federal Financial Education)</option>
            <option value="https://www.incharge.org/financial-literacy/">InCharge Financial Literacy</option>
            <option value="https://www.careeronestop.org/">CareerOneStop (Career Tools)</option>
          </select>
        </label>
        <button id="teacherToggle" class="ghost">Teacher Mode</button>
        <button id="openSettings" class="ghost hidden">Settings</button>
        <button id="exportSession" class="ghost hidden">Export</button>
        <button id="exportCsv" class="ghost hidden">Export CSV</button>
        <div id="teacherStats" class="teacher-stats hidden"></div>
        <button id="registerToggle" class="primary">Register Now</button>
      </div>
    </header>

    <main class="layout">
      <section class="panel" id="introPanel">
        <div class="welcome-header">
          <h1>Welcome</h1>
        </div>
        <button id="creatorToggle" class="creator-badge" type="button">
          <img src="assets/creator.jpg" alt="Photo of Michael R. Terry" />
          <span>About the Creator</span>
        </button>
        <div class="intro-meta">
          <span id="currentDate"></span>
          <span class="dot">•</span>
          <span id="currentScenarioLabel">Boundary Test</span>
        </div>
        <div class="welcome-logo" aria-hidden="true"></div>
        <div class="course-summary">
          <strong>Modern Manners & Mental Fortitude</strong>
          This course builds real-life decision skills for youth and adults: self-control under pressure,
          respectful communication, and choosing the long view. It turns stressful moments into practice
          so learners can pause, think, and choose intentionally.
          <br /><br />
          How it helps: students gain confidence for real situations at school, home, work, and online.
          Adults get a shared language to coach, model, and reinforce good choices.
          <br /><br />
          Instructions: choose a scenario, make a decision, then explain it using unit language.
          Use the three boxes: Tool (self‑regulation), Concept (unit idea), and Why (reasoning).
          Scenarios unlock daily and rotate weekly.
        </div>
        <p class="lead">Practice higher-stakes decisions safely. Choose a scenario, make a choice, then justify it using unit language.</p>
        <div class="year-preview">
          <div class="year-preview-header">
            <h3>Preview</h3>
            <p>Scenarios unlock daily (Mon–Sun). Future scenarios are blurred until their unlock date.</p>
            <div class="month-tabs-row">
              <button type="button" id="monthToggle" class="month-toggle" aria-expanded="false">Month</button>
              <div id="monthTabs" class="month-tabs collapsed"></div>
            </div>
          </div>
          <div id="yearPreview">
            <div id="monthPreview"></div>
            <div id="yearPreviewGrid" class="hidden"></div>
          </div>
        </div>
        <div class="unit-language">
          <h3>Unit Language (Required)</h3>
          <p>Good justifications use at least 3 elements: one self-regulation tool, one concept, and one why statement.</p>
          <ul>
            <li>Tools: stop and pause, breathe, step back, name the feeling, delay the reaction, ask for help, check the facts, reframe, set a boundary, use a checklist, slow down to speed up, repair.</li>
            <li>Concepts: decision-making, self-regulation, impulse control, trade-off, short-term vs long-term, consequences, stakes, risk vs reward, values, goals, priorities, boundaries, responsibility, accountability, choice ownership, impact on others.</li>
            <li>Why stems: I chose this because, My goal is, The trade-off is, The short-term gain is, but the long-term cost is, The biggest risk is, The consequence I’m trying to avoid is, This protects my boundary by, I’m taking responsibility by, I would pause first and then, If this happens again, I will.</li>
          </ul>
        </div>
        <div class="stack">
          <label class="field">
            <span>Participant name</span>
            <input id="studentName" type="text" placeholder="First and last (or preferred name)" />
          </label>
          <label class="field">
            <span>Role or level (optional)</span>
            <input id="studentGrade" type="text" placeholder="e.g., 7th grade, adult learner, educator" />
          </label>
          <label class="field">
            <span>Age (optional)</span>
            <input id="studentAge" type="text" placeholder="e.g., 13, 25, 40+" />
          </label>
        </div>
        <div class="scenario-grid" id="scenarioGrid"></div>
        <div class="corner-badges">
          <button type="button" id="qrToggle" class="qr-toggle" aria-expanded="false">Show QR Resources</button>
          <div id="qrSection" class="qr-section collapsed">
            <div class="badge-card">
              <div class="badge-mark"></div>
              <div class="badge-text">Choose the Long View</div>
            </div>
            <div class="qr-card">
              <div class="qr-title">Follow on Instagram</div>
              <a href="https://www.instagram.com/readyforreal.life/" target="_blank" rel="noopener">
                <img src="assets/qr-instagram.png" alt="QR code to @readyforreal.life on Instagram" />
              </a>
              <div class="qr-handle">@readyforreal.life</div>
            </div>
            <div class="qr-card">
              <div class="qr-title">Khan Academy (Youth)</div>
              <a href="https://www.khanacademy.org/" target="_blank" rel="noopener">
                <img src="assets/qr-khanacademy.png" alt="QR code to Khan Academy" />
              </a>
              <div class="qr-handle">khanacademy.org</div>
            </div>
            <div class="qr-card">
              <div class="qr-title">MyMoney.gov (Adults)</div>
              <a href="https://www.mymoney.gov/" target="_blank" rel="noopener">
                <img src="assets/qr-mymoney.png" alt="QR code to MyMoney.gov" />
              </a>
              <div class="qr-handle">mymoney.gov</div>
            </div>
          </div>
        </div>
      </section>

      <section class="panel hidden" id="gamePanel">
        <div class="scenario-header">
          <div>
            <h2 id="scenarioTitle"></h2>
            <p id="scenarioSummary"></p>
            <div class="tags" id="scenarioTags"></div>
          </div>
          <div class="meters">
            <div class="meter">
              <span>Budget</span>
              <div class="bar"><div id="budgetBar"></div></div>
            </div>
            <div class="meter">
              <span>Time</span>
              <div class="bar"><div id="timeBar"></div></div>
            </div>
            <div class="meter">
              <span>Trust</span>
              <div class="bar"><div id="trustBar"></div></div>
            </div>
          </div>
        </div>

        <div class="step">
          <div class="step-progress">
            <span id="stepCounter">Step 1</span>
            <div class="star-meter" id="starMeter" aria-label="Level progress"></div>
            <div class="progress-bar"><div id="stepProgressBar"></div></div>
          </div>
          <div id="levelUpBadge" class="level-up hidden">Level Up!</div>
          <div class="prompt" id="stepPrompt"></div>
          <div class="choices" id="choices"></div>

          <div class="builder">
            <div class="builder-row">
              <div class="builder-title">
                <span>Pick a Tool
                  <button class="info-badge" type="button" aria-label="What counts as a tool?" data-tooltip="A tool is a self-regulation action you use to slow down or stay in control (pause, breathe, ask for help, check the facts, set a boundary).">?</button>
                </span>
              </div>
              <div class="option-grid" id="toolOptions"></div>
            </div>
            <div class="builder-row">
              <div class="builder-title">
                <span>Pick a Concept
                  <button class="info-badge" type="button" aria-label="What counts as a concept?" data-tooltip="A concept is a unit idea that explains the situation (trade-off, short-term vs long-term, consequences, stakes, risk vs reward, values, goals, boundaries, responsibility).">?</button>
                </span>
              </div>
              <div class="option-grid" id="conceptOptions"></div>
            </div>
            <div class="builder-row">
              <div class="builder-title">
                <span>Pick a Why
                  <button class="info-badge" type="button" aria-label="What counts as a why statement?" data-tooltip="A why statement explains your reason and goal (I chose this because..., My goal is..., The biggest risk is..., This protects my boundary by...).">?</button>
                </span>
              </div>
              <div class="option-grid" id="whyOptions"></div>
              <div class="skip-note">You can choose “Skip for now” if you need more time to explain.</div>
            </div>
            <div class="builder-preview">
              <div class="preview-label">Your response will sound like:</div>
              <div id="sentencePreview" class="preview-text">Pick a tool, concept, and why to build your response.</div>
            </div>
            <button id="undoSelection" type="button" class="ghost">Undo selections</button>
            <label class="field">
              <span>Add a note (optional)</span>
              <textarea id="optionalNote" rows="2" placeholder="Add a quick detail if you want."></textarea>
              <small class="hint">No typing required. Just pick one in each row.</small>
            </label>
            <input id="toolAnswer" type="hidden" />
            <input id="conceptAnswer" type="hidden" />
            <input id="whyAnswer" type="hidden" />
          </div>

          <div class="actions">
            <button id="submitDecision" class="primary">Submit</button>
            <button id="nextStep" class="ghost hidden">Next</button>
          </div>
          <div id="sheetsStatus" class="sheets-status hidden" role="status" aria-live="polite"></div>
        </div>

        <div class="feedback hidden" id="feedbackPanel">
          <h3>Feedback</h3>
          <div id="consequence"></div>
          <div class="feedback-section">
            <h4>AI Feedback</h4>
            <div id="aiFeedback" class="feedback-text"></div>
          </div>
          <div class="feedback-section">
            <h4>Next-Step Options</h4>
            <ul id="aiOptions" class="feedback-list"></ul>
          </div>
          <div class="feedback-section">
            <h4>Related Video</h4>
            <div id="aiVideo" class="feedback-text"></div>
          </div>
        </div>
      </section>

      <section class="panel hidden" id="aiPanel">
        <div class="ai-header">
          <h3>Role-play Partner</h3>
          <div class="toggle">
            <input type="checkbox" id="aiToggle" />
            <label for="aiToggle">Enable AI role-play</label>
          </div>
        </div>
        <div class="chat" id="chat"></div>
        <div class="chat-input">
          <input id="chatMessage" type="text" placeholder="Ask the stakeholder a question" />
          <button id="sendChat">Send</button>
        </div>
      </section>
    </main>
    <div class="copyright">© 2026 Ready For Real Life. All rights reserved. Website design and ownership: Michael R. Terry.</div>
  </div>
  <canvas id="confettiCanvas" class="confetti-canvas" aria-hidden="true"></canvas>

  <dialog id="settingsDialog" class="settings">
    <form method="dialog">
      <h3>AI Settings</h3>
      <p class="muted">Leave blank to use the built-in scripted role-play.</p>
      <label class="field">
        <span>AI endpoint URL</span>
        <input id="endpointUrl" type="url" placeholder="https://your-endpoint.example/chat" />
      </label>
      <label class="field">
        <span>API key (optional)</span>
        <input id="apiKey" type="password" placeholder="Stored locally" />
      </label>
      <label class="field">
        <span>Model name (optional)</span>
        <input id="modelName" type="text" placeholder="model-id" />
      </label>
      <h3>Response Logging (Google Sheets)</h3>
      <p class="muted">Only visible in Teacher Mode. Leave blank to disable logging.</p>
      <label class="field">
        <span>Sheets endpoint URL</span>
        <input id="sheetsEndpoint" type="url" placeholder="https://script.google.com/macros/s/.../exec" />
      </label>
      <label class="field">
        <span>Sheets secret (optional)</span>
        <input id="sheetsSecret" type="password" placeholder="Stored locally" />
      </label>
      <label class="field">
        <span>Sound effects</span>
        <select id="soundToggle">
          <option value="on">On</option>
          <option value="off">Off</option>
        </select>
      </label>
      <button id="testSheets" type="button" class="ghost">Test Sheets Connection</button>
      <menu>
        <button class="ghost" value="cancel">Close</button>
        <button id="saveSettings" class="primary" value="default">Save</button>
      </menu>
    </form>
  </dialog>

  <dialog id="registerDialog" class="settings register-dialog">
    <form method="dialog" id="registerForm">
      <h3>Register for Future Classes</h3>
      <p class="muted">We’ll contact you when class dates and locations are announced.</p>
      <label class="field">
        <span>Full name</span>
        <input id="regName" type="text" placeholder="Your name" required />
      </label>
      <label class="field">
        <span>Email</span>
        <input id="regEmail" type="email" placeholder="name@email.com" required />
      </label>
      <label class="field">
        <span>Phone (optional)</span>
        <input id="regPhone" type="tel" placeholder="(555) 555-5555" />
      </label>
      <label class="field">
        <span>Best fit</span>
        <select id="regGroup" required>
          <option value="">Select one</option>
          <option value="Youth">Youth</option>
          <option value="Adult">Adult</option>
          <option value="Educator">Educator</option>
          <option value="Family">Family</option>
        </select>
      </label>
      <label class="field">
        <span>Notes (optional)</span>
        <textarea id="regNotes" rows="3" placeholder="Preferred days/times, questions, etc."></textarea>
      </label>
      <div id="registerStatus" class="sheets-status hidden" role="status" aria-live="polite"></div>
      <menu>
        <button class="ghost" value="cancel">Close</button>
        <button id="submitRegistration" class="primary" value="default">Submit</button>
      </menu>
    </form>
  </dialog>

  <dialog id="creatorDialog" class="creator-dialog">
    <form method="dialog">
      <div class="creator-header">
        <img src="assets/creator.jpg" alt="Photo of Michael R. Terry" />
        <div>
          <h3>Michael R. Terry</h3>
          <p>Founder, Modern Manners & Mental Fortitude</p>
        </div>
      </div>
      <div class="creator-body">
        <p>For years I have worked in public service, spent time with youth in difficult moments, and raised five kids of my own. One thing has become very clear to me. Schools teach academics well, but many young people are entering adulthood without the life skills they actually need to succeed in the real world.</p>
        <p>That realization pushed me back into school to earn my Master of Arts in Teaching. During this program, I began building something that has become very personal to me.</p>
        <p><strong>Modern Manners and Mental Fortitude.</strong></p>
        <p>This is a curriculum designed to help middle and high school students learn the skills that rarely get a dedicated place in the school day. Skills like respectful communication, emotional regulation, handling conflict, managing stress, digital behavior, and learning how to carry themselves with confidence in real situations.</p>
        <p>This is not about perfection. It is about preparation.</p>
        <p>My goal is simple. Help young people and interested adults become confident, respectful, emotionally grounded people who know how to handle real life.</p>
        <p>The logo you see represents that mission. The shield stands for protection and preparation. The book represents learning and growth. The flame represents wisdom and personal development. The colors represent trust, leadership, and progress.</p>
        <p>This page will be where I share ideas, lessons, and real conversations about preparing the next generation for life outside the classroom.</p>
        <p><strong>This is only the beginning.</strong></p>
      </div>
      <menu>
        <button class="ghost" value="cancel">Close</button>
      </menu>
    </form>
  </dialog>

  <script id="scenariosData" type="application/json">{
  "scenarios": [
    {
      "id": "after_school_job",
      "title": "After-School Job Dilemma",
      "summary": "You need money for a family bill, but your manager schedules you during a major exam week.",
      "stakes": ["Employment", "Family finances", "Academic performance"],
      "roles": ["Student", "Manager", "Parent"],
      "startStep": "step1",
      "meters": { "budget": 60, "time": 40, "trust": 50 },
      "steps": {
        "step1": {
          "prompt": "Your manager schedules you for two extra shifts during exam week. You need the money, but the exams are major.",
          "stakeholder": "Manager",
          "aiPrompts": [
            "I can only give these shifts to someone who is reliable. Can you do it?",
            "Let me know quickly. I have to finalize the schedule today."
          ],
          "choices": [
            {
              "id": "accept",
              "text": "Accept all shifts and plan to study late.",
              "consequence": "You earn money but lose study time and feel stressed.",
              "meterImpact": { "budget": 15, "time": -20, "trust": 5 },
              "nextStep": "step2"
            },
            {
              "id": "negotiate",
              "text": "Negotiate for one shift and explain your exam week.",
              "consequence": "You balance income and study time, but the manager is uncertain.",
              "meterImpact": { "budget": 8, "time": -8, "trust": 3 },
              "nextStep": "step2"
            },
            {
              "id": "decline",
              "text": "Decline and focus on exams.",
              "consequence": "You protect study time but lose income.",
              "meterImpact": { "budget": -10, "time": 12, "trust": -2 },
              "nextStep": "step2"
            }
          ]
        },
        "step2": {
          "prompt": "A parent asks how you will cover the family bill this month.",
          "stakeholder": "Parent",
          "aiPrompts": [
            "We need to know your plan so we can cover the gap.",
            "I want you to succeed in school, but we also have to pay the bill."
          ],
          "choices": [
            {
              "id": "budget",
              "text": "Propose a budget plan and ask for temporary support.",
              "consequence": "The parent feels heard and agrees to help short-term.",
              "meterImpact": { "budget": 10, "time": 5, "trust": 10 },
              "nextStep": "step3"
            },
            {
              "id": "overpromise",
              "text": "Promise to cover it without a clear plan.",
              "consequence": "You avoid conflict now but risk breaking trust later.",
              "meterImpact": { "budget": 0, "time": -4, "trust": -8 },
              "nextStep": "step3"
            },
            {
              "id": "ask_delay",
              "text": "Ask to delay the payment and focus on exams.",
              "consequence": "You buy time but increase financial pressure.",
              "meterImpact": { "budget": -6, "time": 6, "trust": -3 },
              "nextStep": "step3"
            }
          ]
        },
        "step3": {
          "prompt": "Your friend offers to share answers for one exam to reduce stress.",
          "stakeholder": "Friend",
          "aiPrompts": [
            "No one will know. It just makes this week easier.",
            "You have too much on your plate. Take the help."
          ],
          "choices": [
            {
              "id": "refuse",
              "text": "Refuse and explain your values and long-term goals.",
              "consequence": "You keep integrity and lower long-term risk.",
              "meterImpact": { "budget": 0, "time": -2, "trust": 8 },
              "nextStep": "end"
            },
            {
              "id": "accept",
              "text": "Accept the answers to reduce stress.",
              "consequence": "Short-term relief but major academic and trust risks.",
              "meterImpact": { "budget": 0, "time": 6, "trust": -15 },
              "nextStep": "end"
            }
          ]
        }
      }
    },
    {
      "id": "group_project_conflict",
      "title": "Group Project Breakdown",
      "summary": "Your team is behind and one member is disengaged right before the due date.",
      "stakes": ["Grades", "Team trust", "Time pressure"],
      "roles": ["Student", "Teammate", "Teacher"],
      "startStep": "step1",
      "meters": { "budget": 45, "time": 35, "trust": 55 },
      "steps": {
        "step1": {
          "prompt": "One teammate has not done their section. The project is due in 48 hours.",
          "stakeholder": "Teammate",
          "aiPrompts": [
            "I was busy. I can do it tonight, just give me time.",
            "Please don’t tell the teacher yet."
          ],
          "choices": [
            {
              "id": "coach",
              "text": "Set a clear deadline and offer help to finish tonight.",
              "consequence": "You keep collaboration but add work to your schedule.",
              "meterImpact": { "budget": 0, "time": -10, "trust": 6 },
              "nextStep": "step2"
            },
            {
              "id": "reassign",
              "text": "Reassign their section to other team members.",
              "consequence": "The project quality improves, but resentment grows.",
              "meterImpact": { "budget": 0, "time": -8, "trust": -6 },
              "nextStep": "step2"
            },
            {
              "id": "escalate",
              "text": "Tell the teacher immediately and document the issue.",
              "consequence": "You protect your grade, but it affects team relationships.",
              "meterImpact": { "budget": 0, "time": -4, "trust": -4 },
              "nextStep": "step2"
            }
          ]
        },
        "step2": {
          "prompt": "The teammate sends a partial draft. It is not high quality.",
          "stakeholder": "Teammate",
          "aiPrompts": [
            "I did what I could. It’s not perfect, but it’s something.",
            "Can you just fix it?"
          ],
          "choices": [
            {
              "id": "revise",
              "text": "Revise it and give feedback for next time.",
              "consequence": "You secure the grade but carry extra workload.",
              "meterImpact": { "budget": 0, "time": -12, "trust": 5 },
              "nextStep": "step3"
            },
            {
              "id": "negotiate",
              "text": "Ask them to revise with specific expectations.",
              "consequence": "You reinforce accountability but risk delays.",
              "meterImpact": { "budget": 0, "time": -6, "trust": 2 },
              "nextStep": "step3"
            },
            {
              "id": "replace",
              "text": "Replace their section without discussion.",
              "consequence": "Quality improves but trust takes a hit.",
              "meterImpact": { "budget": 0, "time": -8, "trust": -8 },
              "nextStep": "step3"
            }
          ]
        },
        "step3": {
          "prompt": "The teacher asks for a reflection on how the team handled the conflict.",
          "stakeholder": "Teacher",
          "aiPrompts": [
            "Be honest. How did your team handle responsibility and communication?",
            "What would you do differently next time?"
          ],
          "choices": [
            {
              "id": "reflect",
              "text": "Describe the conflict and your conflict-resolution strategy.",
              "consequence": "You show growth and apply unit language.",
              "meterImpact": { "budget": 0, "time": 3, "trust": 8 },
              "nextStep": "end"
            },
            {
              "id": "deflect",
              "text": "Avoid details and keep it surface-level.",
              "consequence": "You miss a chance to show learning.",
              "meterImpact": { "budget": 0, "time": 2, "trust": -4 },
              "nextStep": "end"
            }
          ]
        }
      }
    },
    {
      "id": "online_pressure",
      "title": "Online Pressure and Reputation",
      "summary": "A rumor spreads online and you are asked to respond publicly.",
      "stakes": ["Reputation", "Safety", "Peer pressure"],
      "roles": ["Student", "Peer", "Coach"],
      "startStep": "step1",
      "meters": { "budget": 50, "time": 50, "trust": 40 },
      "steps": {
        "step1": {
          "prompt": "A rumor about you is spreading in a group chat. People want a response now.",
          "stakeholder": "Peer",
          "aiPrompts": [
            "You should clap back. Everyone is watching.",
            "If you stay quiet, people will think it’s true."
          ],
          "choices": [
            {
              "id": "pause",
              "text": "Pause, gather facts, and set a plan before responding.",
              "consequence": "You reduce risk and stay in control.",
              "meterImpact": { "budget": 0, "time": -4, "trust": 6 },
              "nextStep": "step2"
            },
            {
              "id": "respond_fast",
              "text": "Respond immediately and defend yourself.",
              "consequence": "You feel relief but may escalate the situation.",
              "meterImpact": { "budget": 0, "time": -6, "trust": -4 },
              "nextStep": "step2"
            },
            {
              "id": "ignore",
              "text": "Ignore the messages and hope it fades.",
              "consequence": "You avoid conflict but lose control of the narrative.",
              "meterImpact": { "budget": 0, "time": 4, "trust": -6 },
              "nextStep": "step2"
            }
          ]
        },
        "step2": {
          "prompt": "A teammate asks if the rumor is true and if it affects your role.",
          "stakeholder": "Coach",
          "aiPrompts": [
            "I need to know if this is a team issue. What’s your plan?",
            "Help me understand the facts."
          ],
          "choices": [
            {
              "id": "facts",
              "text": "Explain the facts calmly and outline your response plan.",
              "consequence": "You build trust and show leadership.",
              "meterImpact": { "budget": 0, "time": -3, "trust": 10 },
              "nextStep": "step3"
            },
            {
              "id": "defensive",
              "text": "Get defensive and blame others.",
              "consequence": "Trust drops and the issue escalates.",
              "meterImpact": { "budget": 0, "time": -2, "trust": -10 },
              "nextStep": "step3"
            }
          ]
        },
        "step3": {
          "prompt": "You decide how to respond publicly. Your post will be seen by peers and adults.",
          "stakeholder": "Peer",
          "aiPrompts": [
            "Think about how this will look a week from now.",
            "Do you want to post at all, or use a private message?"
          ],
          "choices": [
            {
              "id": "private",
              "text": "Address it privately and focus on repairing trust.",
              "consequence": "You reduce public drama but need patience.",
              "meterImpact": { "budget": 0, "time": -4, "trust": 8 },
              "nextStep": "end"
            },
            {
              "id": "public",
              "text": "Post a calm public response with facts and boundaries.",
              "consequence": "You show leadership but risk further attention.",
              "meterImpact": { "budget": 0, "time": -6, "trust": 4 },
              "nextStep": "end"
            }
          ]
        }
      }
    },
    {
      "id": "family_budget_emergency",
      "title": "Family Budget Emergency",
      "summary": "A sudden expense hits your household and you are asked to help decide priorities.",
      "stakes": ["Family stability", "Financial responsibility", "Long-term planning"],
      "roles": ["Student", "Parent", "Sibling"],
      "startStep": "step1",
      "meters": { "budget": 35, "time": 55, "trust": 60 },
      "steps": {
        "step1": {
          "prompt": "A car repair bill arrives. The family budget is short this month.",
          "stakeholder": "Parent",
          "aiPrompts": [
            "We need to decide what to cut this month. What’s your plan?",
            "I’m stressed. We have to choose wisely."
          ],
          "choices": [
            {
              "id": "prioritize",
              "text": "List essential expenses and propose cuts to non-essentials.",
              "consequence": "The plan reduces risk and keeps essentials covered.",
              "meterImpact": { "budget": 12, "time": -4, "trust": 6 },
              "nextStep": "step2"
            },
            {
              "id": "avoid",
              "text": "Avoid the conversation and hope it works out.",
              "consequence": "Short-term comfort but long-term risk increases.",
              "meterImpact": { "budget": -6, "time": 2, "trust": -8 },
              "nextStep": "step2"
            },
            {
              "id": "loan",
              "text": "Suggest a short-term loan without reviewing the terms.",
              "consequence": "Immediate relief but potential future burden.",
              "meterImpact": { "budget": 6, "time": -6, "trust": -4 },
              "nextStep": "step2"
            }
          ]
        },
        "step2": {
          "prompt": "A sibling asks to keep a planned event that costs money.",
          "stakeholder": "Sibling",
          "aiPrompts": [
            "It’s not fair. I already invited people.",
            "Can’t we just do this one thing?"
          ],
          "choices": [
            {
              "id": "compromise",
              "text": "Offer a lower-cost alternative and explain the trade-off.",
              "consequence": "You protect relationships and the budget.",
              "meterImpact": { "budget": 6, "time": -2, "trust": 8 },
              "nextStep": "step3"
            },
            {
              "id": "no",
              "text": "Say no without explanation.",
              "consequence": "You save money but damage trust.",
              "meterImpact": { "budget": 8, "time": 0, "trust": -10 },
              "nextStep": "step3"
            }
          ]
        },
        "step3": {
          "prompt": "You need to explain the plan to the family.",
          "stakeholder": "Parent",
          "aiPrompts": [
            "How will you explain this plan so everyone buys in?",
            "What will you do if people push back?"
          ],
          "choices": [
            {
              "id": "communicate",
              "text": "Communicate the plan and ask for input.",
              "consequence": "Shared ownership increases follow-through.",
              "meterImpact": { "budget": 2, "time": -2, "trust": 8 },
              "nextStep": "end"
            },
            {
              "id": "dictate",
              "text": "Dictate the plan quickly and move on.",
              "consequence": "It saves time but weakens buy-in.",
              "meterImpact": { "budget": 2, "time": 2, "trust": -6 },
              "nextStep": "end"
            }
          ]
        }
      }
    },
    {
      "id": "sports_injury_pressure",
      "title": "Play Through an Injury?",
      "summary": "A coach wants you to play, but your injury might worsen.",
      "stakes": ["Health", "Team commitment", "Long-term goals"],
      "roles": ["Student", "Coach", "Parent"],
      "startStep": "step1",
      "meters": { "budget": 50, "time": 50, "trust": 55 },
      "steps": {
        "step1": {
          "prompt": "You twisted your ankle at practice. The coach wants you to play in a big game.",
          "stakeholder": "Coach",
          "aiPrompts": [
            "We need you out there. Can you push through?",
            "It’s a big game. What can we do to make this work?"
          ],
          "choices": [
            {
              "id": "play",
              "text": "Agree to play without getting medical advice.",
              "consequence": "You help the team now but risk long-term injury.",
              "meterImpact": { "budget": 0, "time": -6, "trust": -4 },
              "nextStep": "step2"
            },
            {
              "id": "check",
              "text": "Ask for medical guidance before deciding.",
              "consequence": "You protect your health and make a informed choice.",
              "meterImpact": { "budget": 0, "time": -4, "trust": 6 },
              "nextStep": "step2"
            },
            {
              "id": "decline",
              "text": "Decline and focus on recovery.",
              "consequence": "Short-term disappointment but long-term health is protected.",
              "meterImpact": { "budget": 0, "time": 4, "trust": -2 },
              "nextStep": "step2"
            }
          ]
        },
        "step2": {
          "prompt": "Your teammates are disappointed and ask you to reconsider.",
          "stakeholder": "Teammate",
          "aiPrompts": [
            "We need you. It’s only one game.",
            "Can you at least play part of it?"
          ],
          "choices": [
            {
              "id": "explain",
              "text": "Explain your long-term goals and health boundaries.",
              "consequence": "You model self-regulation and protect health.",
              "meterImpact": { "budget": 0, "time": -2, "trust": 6 },
              "nextStep": "step3"
            },
            {
              "id": "give_in",
              "text": "Give in to pressure and play anyway.",
              "consequence": "Team is happy but risk increases.",
              "meterImpact": { "budget": 0, "time": -4, "trust": -6 },
              "nextStep": "step3"
            }
          ]
        },
        "step3": {
          "prompt": "A parent asks how you decided.",
          "stakeholder": "Parent",
          "aiPrompts": [
            "Walk me through your thinking.",
            "What trade-offs did you consider?"
          ],
          "choices": [
            {
              "id": "reflect",
              "text": "Describe your decision-making steps and trade-offs.",
              "consequence": "You show clear reasoning and values.",
              "meterImpact": { "budget": 0, "time": 2, "trust": 8 },
              "nextStep": "end"
            },
            {
              "id": "avoid",
              "text": "Say it was no big deal.",
              "consequence": "You miss a chance to show growth.",
              "meterImpact": { "budget": 0, "time": 2, "trust": -4 },
              "nextStep": "end"
            }
          ]
        }
      }
    },
    {
      "id": "late_night_ride",
      "title": "Late-Night Ride",
      "summary": "A friend offers a ride home late at night, but you are unsure about safety.",
      "stakes": ["Safety", "Peer pressure", "Decision ownership"],
      "roles": ["Student", "Friend", "Guardian"],
      "startStep": "step1",
      "meters": { "budget": 55, "time": 40, "trust": 50 },
      "steps": {
        "step1": {
          "prompt": "A friend offers a ride home late at night. You are unsure if they are a safe driver.",
          "stakeholder": "Friend",
          "aiPrompts": [
            "It’s fine. We’ll get there fast.",
            "Don’t be dramatic. I do this all the time."
          ],
          "choices": [
            {
              "id": "safe_plan",
              "text": "Pause and suggest a safer plan (call a guardian or use a safer route).",
              "consequence": "You reduce risk and model responsible decision-making.",
              "meterImpact": { "budget": -4, "time": -6, "trust": 6 },
              "nextStep": "step2"
            },
            {
              "id": "go",
              "text": "Accept the ride to avoid conflict.",
              "consequence": "You save time but accept more risk.",
              "meterImpact": { "budget": 0, "time": 6, "trust": -6 },
              "nextStep": "step2"
            },
            {
              "id": "decline",
              "text": "Decline the ride and wait for another option.",
              "consequence": "You prioritize safety but it takes longer.",
              "meterImpact": { "budget": -2, "time": -8, "trust": 2 },
              "nextStep": "step2"
            }
          ]
        },
        "step2": {
          "prompt": "Your guardian texts asking for your plan to get home safely.",
          "stakeholder": "Guardian",
          "aiPrompts": [
            "I need to know where you are and how you’re getting home.",
            "What’s your plan?"
          ],
          "choices": [
            {
              "id": "communicate",
              "text": "Share your plan and ask for support.",
              "consequence": "You build trust and keep safety first.",
              "meterImpact": { "budget": 0, "time": -2, "trust": 8 },
              "nextStep": "step3"
            },
            {
              "id": "vague",
              "text": "Be vague to avoid questions.",
              "consequence": "You risk trust and increase uncertainty.",
              "meterImpact": { "budget": 0, "time": 0, "trust": -8 },
              "nextStep": "step3"
            }
          ]
        },
        "step3": {
          "prompt": "Reflect on the decision you made about safety and pressure.",
          "stakeholder": "Guardian",
          "aiPrompts": [
            "What was the biggest risk?",
            "What would you do if this happened again?"
          ],
          "choices": [
            {
              "id": "reflect",
              "text": "Describe your risk assessment and how you managed pressure.",
              "consequence": "You show transfer of decision-making skills.",
              "meterImpact": { "budget": 0, "time": 2, "trust": 8 },
              "nextStep": "end"
            },
            {
              "id": "minimize",
              "text": "Say it wasn’t a big deal.",
              "consequence": "You miss an opportunity to show growth.",
              "meterImpact": { "budget": 0, "time": 2, "trust": -4 },
              "nextStep": "end"
            }
          ]
        }
      }
    }
  ]
}
</script>
<script id="rubricData" type="application/json">{
  "criteria": [
    {
      "id": "unit_language",
      "label": "Uses unit language accurately",
      "max": 3,
      "keywords": [
        "decision-making",
        "self-regulation",
        "self regulation",
        "impulse control",
        "pause and plan",
        "trade-off",
        "trade off",
        "short-term",
        "long-term",
        "consequence",
        "consequences",
        "stakes",
        "risk vs reward",
        "values",
        "goals",
        "priorities",
        "boundaries",
        "responsibility",
        "accountability",
        "choice ownership",
        "impact on others"
      ]
    },
    {
      "id": "reasoning",
      "label": "Explains reasoning clearly",
      "max": 3,
      "keywords": [
        "because",
        "so that",
        "therefore",
        "risk",
        "benefit",
        "impact",
        "priority",
        "plan",
        "pros and cons",
        "best next step",
        "worst-case",
        "most likely",
        "second-order",
        "information i still need",
        "assumptions",
        "pressure",
        "time limit",
        "scarce resources",
        "plan a",
        "plan b",
        "support system",
        "follow-through"
      ]
    },
    {
      "id": "self_regulation",
      "label": "Names a self-regulation strategy",
      "max": 3,
      "keywords": [
        "stop and pause",
        "pause",
        "breathe",
        "step back",
        "name the feeling",
        "delay",
        "ask for help",
        "check the facts",
        "reframe",
        "set a boundary",
        "checklist",
        "slow down to speed up",
        "repair"
      ]
    },
    {
      "id": "transfer",
      "label": "Connects to a higher-stakes situation",
      "max": 3,
      "keywords": [
        "in real life",
        "workplace",
        "at home",
        "online",
        "relationship",
        "health and safety",
        "long-term reputation",
        "trust and credibility",
        "legal risk",
        "team impact",
        "future opportunities"
      ]
    }
  ],
  "minimumLength": 90,
  "lengthScore": 1,
  "requiredGroups": {
    "tools": [
      "stop and pause",
      "pause",
      "breathe",
      "step back",
      "name the feeling",
      "delay",
      "ask for help",
      "check the facts",
      "reframe",
      "set a boundary",
      "checklist",
      "slow down to speed up",
      "repair"
    ],
    "concepts": [
      "decision-making",
      "self-regulation",
      "self regulation",
      "impulse control",
      "pause and plan",
      "trade-off",
      "trade off",
      "short-term",
      "long-term",
      "consequence",
      "consequences",
      "stakes",
      "risk vs reward",
      "values",
      "goals",
      "priorities",
      "boundaries",
      "responsibility",
      "accountability",
      "choice ownership",
      "impact on others"
    ],
    "why": [
      "i chose this because",
      "my goal is",
      "the trade-off is",
      "the short-term gain is",
      "but the long-term cost is",
      "the biggest risk is",
      "the consequence i'm trying to avoid is",
      "this protects my boundary by",
      "i'm taking responsibility by",
      "i would pause first and then",
      "if this happens again, i will"
    ]
  },
  "requiredGroupCount": 3
}
</script>
<script src="app.js"></script>
</body>
</html>
